
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fight Ticket - Tickety</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
             <a href="{{ url_for('index') }}" class="back-button"><span class="material-icons">arrow_back</span></a>
             <h1 style="margin-left: 1rem;">Fight Your Ticket</h1>
        </header>
        <main class="app-main">
            <div class="stepper">
                <!-- Step 1: Copy Info -->
                <div class="step" id="step-1">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">
                            <h2>Copy Required Info</h2>
                        </div>
                        <div class="step-status"><span class="material-icons check-icon">check_circle</span></div>
                    </div>
                    <div class="step-content">
                        <div class="copy-group"><label for="copy-ticket_number">Ticket Number</label><div class="input-wrapper"><input type="text" value="{{ ticket_number }}" readonly id="copy-ticket_number"><button class="copy-btn" data-target="copy-ticket_number"><span class="material-icons">content_copy</span></button></div></div>
                        <div class="copy-group"><label for="copy-license">Driver's License</label><div class="input-wrapper"><input type="text" value="{{ profile.license }}" readonly id="copy-license"><button class="copy-btn" data-target="copy-license"><span class="material-icons">content_copy</span></button></div></div>
                    </div>
                </div>

                <!-- Step 2: Copy Plea -->
                <div class="step" id="step-2">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">
                            <h2>Copy Your Plea Explanation</h2>
                        </div>
                        <div class="step-status"><span class="material-icons check-icon">check_circle</span></div>
                    </div>
                    <div class="step-content">
                        <textarea readonly id="copy-plea_text">{{ plea_text }}</textarea>
                        <button class="btn btn-secondary copy-btn" data-target="copy-plea_text">
                            <span class="material-icons">content_copy</span> Copy Explanation
                        </button>
                    </div>
                </div>

                <!-- Step 3: Submit -->
                <div class="step" id="step-3">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">
                            <h2>Submit on the Portal</h2>
                        </div>
                    </div>
                    <div class="step-content">
                        <button id="openPortalBtn" data-url="{{ montreal_url }}" class="btn btn-success">
                            <span class="material-icons">open_in_new</span> Open Montreal Portal
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        document.getElementById('openPortalBtn').addEventListener('click', function() {
            const url = this.dataset.url;
            window.open(url, '_blank');
        });
    </script>
</body>
</html>
